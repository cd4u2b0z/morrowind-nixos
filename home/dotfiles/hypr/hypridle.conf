# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  â° HYPRIDLE CONFIGURATION                                        â•‘
# â•‘  Intelligent idle management for craig@grim-reefer               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âš™ï¸ GENERAL SETTINGS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

general {
    lock_cmd = pidof hyprlock || hyprlock       # avoid starting multiple hyprlock instances
    before_sleep_cmd = pidof hyprlock || hyprlock  # lock before suspend
    after_sleep_cmd = hyprctl dispatch dpms on && sleep 0.5 && (pidof hyprlock || hyprlock)  # turn on display and ensure lock screen
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ðŸ”„ IDLE LISTENERS - PROGRESSIVE POWER MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Stage 1: Dim screen after 5 minutes of inactivity
listener {
    timeout = 300                                           # 5 minutes
    on-timeout = brightnessctl -s set 20%                 # save current brightness and dim to 20%
    on-resume = brightnessctl -r                           # restore previous brightness
}

# Stage 2: Turn off keyboard backlight after 7 minutes
listener {
    timeout = 420                                           # 7 minutes
    on-timeout = brightnessctl -sd rgb:kbd_backlight set 0 # turn off keyboard backlight
    on-resume = brightnessctl -rd rgb:kbd_backlight        # restore keyboard backlight
}

# Stage 3: Lock screen after 10 minutes
listener {
    timeout = 600                                           # 10 minutes
    on-timeout = loginctl lock-session                     # lock screen
}

# Stage 4: Turn off displays after 12 minutes
listener {
    timeout = 720                                           # 12 minutes
    on-timeout = hyprctl dispatch dpms off                 # turn off displays
    on-resume = hyprctl dispatch dpms on                   # turn on displays
}

# Stage 5: Suspend system after 20 minutes (when on battery)
listener {
    timeout = 1200                                          # 20 minutes
    on-timeout = if [ "$(cat /sys/class/power_supply/A*/online 2>/dev/null || echo 0)" = "0" ]; then systemctl suspend; fi
}

# Stage 6: Hibernate after 2 hours (extreme idle, any power state)
listener {
    timeout = 7200                                          # 2 hours
    on-timeout = systemctl hibernate
}